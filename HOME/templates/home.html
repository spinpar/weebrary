{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kitsu API</title>
    <link rel="stylesheet" href="{% static 'styles/main.css' %}">
</head>
<body>

<h1>Kitsu API</h1>

<form method="post" action="{% url 'fetch_anime' %}">
    {% csrf_token %}
    <button type="submit">Fetch & Save Anime</button>
</form>

<form method="post" action="{% url 'fetch_manga' %}">
    {% csrf_token %}
    <button type="submit">Fetch & Save Manga</button>
</form>

{% if error %}
    <p class="error">{{ error }}</p>
{% endif %}

<h2>Anime</h2>
<div class="cards-container">
    {% for anime in data %}
    <div class="card">
        <h3>{{ anime.title }}</h3>
        <p>{{ anime.synopsis|truncatechars:100 }}</p>
        <p class="rating">Rating: {{ anime.rating }}</p>
    </div>
    {% empty %}
        <p>No anime saved yet.</p>
    {% endfor %}
</div>

<h2>Manga</h2>
<div class="cards-container">
    {% for manga in data_manga %}
    <div class="card">
        <h3>{{ manga.title }}</h3>
        <p>{{ manga.synopsis|truncatechars:100 }}</p>
        <p class="rating">Rating: {{ manga.rating }}</p>
    </div>
    {% empty %}
        <p>No manga saved yet.</p>
    {% endfor %}
</div>

</body>
</html>
